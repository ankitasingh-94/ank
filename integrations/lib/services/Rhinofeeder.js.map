{"version":3,"sources":["../../src/services/Rhinofeeder.js"],"names":["sendCSVData","file","orgId","handler","Promise","resolve","reject","fs","readFile","err","data","axios","defaults","headers","common","Authorization","Buffer","from","process","env","FEEDER_BASIC_AUTH","toString","message","post","FEEDER_BASE_URL","sendData1","console","log","user","org","id"],"mappings":";;;;;;;;AACA;;AACA;;;;AAEO,eAAeA,WAAf,CAA2BC,IAA3B,EAAiCC,KAAjC,EAAwCC,OAAxC,EAAiD;AACtD,SAAO,IAAIC,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACvCC,gBAAGC,QAAH,CAAYP,IAAZ,EAAkB,MAAlB,EAA0B,OAAOQ,GAAP,EAAYC,IAAZ,KAAqB;AAC7C,UAAID,GAAJ,EAAS,MAAMA,GAAN;AACTE,qBAAMC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,GAA+C,SAAQC,MAAM,CAACC,IAAP,CAAYC,OAAO,CAACC,GAAR,CAAYC,iBAAxB,EAA2CC,QAA3C,CAAoD,QAApD,CAA8D,EAArH;AACA,YAAMC,OAAO,GAAG,MAAMX,eAAMY,IAAN,CAAY,GAAEL,OAAO,CAACC,GAAR,CAAYK,eAAgB,wBAAuBrB,OAAQ,mBAAkBD,KAAM,EAAjG,EAAoGQ,IAApG,EACpB;AACEG,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AADX,OADoB,CAAtB;AAMAR,MAAAA,OAAO,CAACiB,OAAD,CAAP;AACD,KAVD;AAWD,GAZM,CAAP;AAaD;;AAGM,eAAeG,SAAf,GAA2B;AAChClB,cAAGC,QAAH,CAAY,+BAAZ,EAA6C,MAA7C,EAAqD,CAACC,GAAD,EAAMC,IAAN,KAAe;AAClE,QAAID,GAAJ,EAAS,MAAMA,GAAN;AACTiB,IAAAA,OAAO,CAACC,GAAR,CAAYjB,IAAZ;;AACAC,mBAAMY,IAAN,CAAW,yEAAX,EAAsF;AAAEK,MAAAA,IAAI,EAAElB,IAAR;AAAcR,MAAAA,KAAK,EAAE2B,GAAG,CAACC;AAAzB,KAAtF;AACD,GAJD;AAKD","sourcesContent":["\nimport fs from 'fs';\nimport axios from 'axios';\n\nexport async function sendCSVData(file, orgId, handler) {\n  return new Promise(((resolve, reject) => {\n    fs.readFile(file, 'utf8', async (err, data) => {\n      if (err) throw err;\n      axios.defaults.headers.common.Authorization = `Basic ${Buffer.from(process.env.FEEDER_BASIC_AUTH).toString('base64')}`;\n      const message = await axios.post(`${process.env.FEEDER_BASE_URL}/csv/process?handler=${handler}&organizationId=${orgId}`, data,\n        {\n          headers: {\n            'Content-Type': 'text/csv',\n          },\n        });\n      resolve(message);\n    });\n  }));\n}\n\n\nexport async function sendData1() {\n  fs.readFile('.../../resources/fakeData.csv', 'utf8', (err, data) => {\n    if (err) throw err;\n    console.log(data);\n    axios.post('/csv/process?email=shannon@rhinogram.com&handler=users&organizationId=1', { user: data, orgId: org.id });\n  });\n}\n"],"file":"Rhinofeeder.js"}